import{q as f,r as c,j as e}from"./index-pa_thSCV.js";import{C as i,a as r}from"./CRow-C3S0_Vw6.js";import{C,a as E}from"./CCardBody-GxEf9Cn3.js";import{C as N}from"./CCardHeader-DlNUx34W.js";import{C as b}from"./CForm-NXa-OVrg.js";import{C as o}from"./CFormLabel-CMaJqg25.js";import{C as l}from"./CFormInput-DIoOgNae.js";import{C as v}from"./CFormSelect-BnKiXsSP.js";import{a as I}from"./index.esm-Dz0yT19O.js";import"./CFormControlWrapper-DllR3RVu.js";import"./CFormControlValidation-D9fpJgZl.js";const A=()=>{const p=f();c.useEffect(()=>{localStorage.getItem("token")||p("/login")},[p]);const[a,x]=c.useState({name:"",employeeId:"",designation:"",department:"",contactNumber:"",email:"",dateOfJoining:""}),[j,g]=c.useState([]),m="https://hospital-management-server-nu.vercel.app/api/employee-records",h=localStorage.getItem("token");c.useEffect(()=>{(async()=>{try{const n=await fetch(m,{method:"GET",headers:{Authorization:`Bearer ${h}`}});if(!n.ok)throw new Error("Failed to fetch employee records");const d=await n.json();g(d.reverse())}catch(n){console.error("Error fetching employee records:",n)}})()},[m,h]);const s=t=>{const{name:n,value:d}=t.target;x(y=>({...y,[n]:d}))},u=async()=>{try{const t=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(a)}),n=await t.json();if(t.ok)g(d=>[...d,n.newRecord]),x({name:"",employeeId:"",designation:"",department:"",contactNumber:"",email:"",dateOfJoining:""});else throw new Error(n.message||"Error saving employee record.")}catch(t){console.error("Error submitting employee details:",t),alert("Error saving employee record.")}};return e.jsx(i,{children:e.jsx(r,{xs:12,children:e.jsxs(C,{className:"mb-4",children:[e.jsx(N,{children:e.jsx("strong",{children:"Employee Records Management"})}),e.jsxs(E,{children:[e.jsxs(b,{children:[e.jsxs(i,{children:[e.jsxs(r,{md:6,children:[e.jsx(o,{htmlFor:"name",children:"Employee Name"}),e.jsx(l,{type:"text",id:"name",name:"name",value:a.name,onChange:s,placeholder:"Enter employee name"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{htmlFor:"employeeId",children:"Employee ID"}),e.jsx(l,{type:"text",id:"employeeId",name:"employeeId",value:a.employeeId,onChange:s,placeholder:"Enter employee ID"})]})]}),e.jsxs(i,{className:"mt-3",children:[e.jsxs(r,{md:6,children:[e.jsx(o,{htmlFor:"designation",children:"Designation"}),e.jsx(l,{type:"text",id:"designation",name:"designation",value:a.designation,onChange:s,placeholder:"Enter designation (e.g., Nurse, Technician)"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{htmlFor:"department",children:"Department"}),e.jsxs(v,{id:"department",name:"department",value:a.department,onChange:s,children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"nursing",children:"Nursing"}),e.jsx("option",{value:"lab",children:"Lab Technicians"}),e.jsx("option",{value:"administration",children:"Administration"})]})]})]}),e.jsxs(i,{className:"mt-3",children:[e.jsxs(r,{md:6,children:[e.jsx(o,{htmlFor:"contactNumber",children:"Contact Number"}),e.jsx(l,{type:"tel",id:"contactNumber",name:"contactNumber",value:a.contactNumber,onChange:s,placeholder:"Enter contact number"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(l,{type:"email",id:"email",name:"email",value:a.email,onChange:s,placeholder:"Enter email address"})]})]}),e.jsx(i,{className:"mt-3",children:e.jsxs(r,{md:6,children:[e.jsx(o,{htmlFor:"dateOfJoining",children:"Date of Joining"}),e.jsx(l,{type:"date",id:"dateOfJoining",name:"dateOfJoining",value:a.dateOfJoining,onChange:s})]})}),e.jsx(i,{className:"mt-4",children:e.jsx(r,{md:2,children:e.jsx(I,{color:"primary",onClick:u,children:"Save Record"})})})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("h5",{children:"Employee Records"}),j.length>0?e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Designation"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Contact Number"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Date of Joining"})]})}),e.jsx("tbody",{children:j.map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.employeeId}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.designation}),e.jsx("td",{children:t.department}),e.jsx("td",{children:t.contactNumber}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.dateOfJoining})]},n))})]}):e.jsx("p",{children:"No employee records available"})]})]})]})})})};export{A as default};
