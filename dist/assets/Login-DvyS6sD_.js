import{r as o,q as N,j as e,L as b}from"./index-pa_thSCV.js";import{b as L,c as d,a as i}from"./index.esm-Dz0yT19O.js";import{C as m,a as n}from"./CRow-C3S0_Vw6.js";import{C as S}from"./CCardGroup-DpXl63Fg.js";import{C as p,a as h}from"./CCardBody-GxEf9Cn3.js";import{C as k}from"./CForm-NXa-OVrg.js";import{C as x,a as j}from"./CInputGroupText-CO-DgtaG.js";import{c as I,a as E}from"./cil-user-Dlmw-Gem.js";import{C as u}from"./CFormInput-DIoOgNae.js";import"./CFormControlWrapper-DllR3RVu.js";import"./CFormControlValidation-D9fpJgZl.js";import"./CFormLabel-CMaJqg25.js";const z=()=>{const[a,g]=o.useState(""),[t,C]=o.useState(""),[c,l]=o.useState(""),y=N(),f=async r=>{r.preventDefault(),l("");try{console.log({email:a,password:t}),console.error("https://hospital-management-server-nu.vercel.app");const s=await fetch("https://hospital-management-server-nu.vercel.app/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:t})});if(!s.ok){const w=await s.json().catch(()=>({error:"Invalid response from server"}));throw new Error(w.error||"Login failed, please try again.")}const v=await s.json();localStorage.setItem("token",v.token),y("/dashboard")}catch(s){l(s.message||"Network error, please try again later.")}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(L,{children:e.jsx(m,{className:"justify-content-center",children:e.jsx(n,{md:8,children:e.jsxs(S,{children:[e.jsx(p,{className:"p-4",children:e.jsx(h,{children:e.jsxs(k,{onSubmit:f,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),c&&e.jsx("div",{className:"text-danger mb-3",children:c}),e.jsxs(x,{className:"mb-3",children:[e.jsx(j,{children:e.jsx(d,{icon:I})}),e.jsx(u,{value:a,onChange:r=>g(r.target.value),placeholder:"Email",autoComplete:"email"})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(j,{children:e.jsx(d,{icon:E})}),e.jsx(u,{type:"password",value:t,onChange:r=>C(r.target.value),placeholder:"Password",autoComplete:"current-password"})]}),e.jsxs(m,{children:[e.jsx(n,{xs:6,children:e.jsx(i,{type:"submit",color:"primary",className:"px-4",children:"Login"})}),e.jsx(n,{xs:6,className:"text-right",children:e.jsx(i,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),e.jsx(p,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(h,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),e.jsx(b,{to:"/register",children:e.jsx(i,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})})};export{z as default};
